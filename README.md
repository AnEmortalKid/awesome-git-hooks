# git-hooks
:anchor: A collection of git hooks with resources for learning how to use them.

## What are git hooks?
Git hooks are custom scripts you can use to automate tasks which are triggered before or after a git command is executed.
> "Like many other Version Control Systems, Git has a way to fire off custom scripts when certain important actions occur. There are two groups of these hooks: client-side and server-side. Client-side hooks are triggered by operations such as committing and merging, while server-side hooks run on network operations such as receiving pushed commits. You can use these hooks for all sorts of reasons." - [git-scm.com](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)

### Common Situations Where Git Hooks are Useful
Do you ever push your code, only to realize you forgot to run that darn formatting command? There's a git hook for that!

Ever wonder why your code doesn't work after switching branches and realize it's because you forgot to update submodules (again)? Don't worry, there's a git hook for that too!

Do you write code using a work email at work and a school email at school? Ever forget to use the correct email in your config? That means you won't show up correctly as the commit author. Time to *git* hooked on git hooks! (Ha! :laughing:)

## How to Use a Git Hook
1. Pick a sample, any sample! Try the "verify-name-and-email" one if you're not sure where to start.
2. Navigate to your project's hooks folder (.git/hooks).
3. You should see a list of files already in there. Create a new file called the exact commit type that you want to use (eg: "commit-msg", "pre-rebase", "update", etc.). Do not give it an extension. (So if trying out the "verify-name-and-email" sample, create a file called "pre-commit")
4. Open your new file and paste the code from the sample you chose out of this repo. (eg: [verify-name-and-email.sample](https://github.com/CompSciLauren/git-hooks/blob/master/pre-commit-samples/verify-name-and-email.sample))
5. Save file. Done! Now the git hook will be triggered by whatever event should cause it. (So with "verify-name-and-email", if you try to make a commit when your user.name or user.email in your git config doesn't match the name or email you specified in the git hook, it will fail the commit)

## Overview of Samples
A sample is simply a git hook file (they all have .sample as the extension). Each git hook is a sequence of commands to be executed at some point either before or after a git command is executed. All samples in this repo are organized based on when a person would most likely need them to be executed. Follow the steps above to get started using a git hook. For a list of git commands that can trigger a git hook, visit [git-scm.com/docs/githooks](https://git-scm.com/docs/githooks).

This repo contains the following samples:

**_commit-msg samples_** - invoked by `git commit` and `git merge`
- **enforce-insert-issue-number:** make sure user did not delete the ISSUE-[#] string that was generated by prepare-commit-msg/insert-issue-number.sample

**_post-checkout samples_** - invoked by `git checkout`
- **delete-pyc-files:** delete all .pyc files every time a new branch is checked out
- **new-branch-commit-and-display-message:** create a commit and display a message when a new branch is checked out for the first time

**_pre-commit samples_** - invoked by `git commit`
- **format-code:** run command to format code and re-add any files modified after formatting
- **search-term:** fail commit if a specific term is found in the code
- **verify-name-and-email:** fail commit if user.name or user.email is incorrect

**_prepare-commit-msg samples_** - invoked by `git commit`
- **insert-issue-number:** insert issue number to beginning of the commit message

**_default samples_**

Samples that are automatically generated in .git/hooks
- **applypatch-msg:** check the commit log message taken by applypatch from an e-mail message
- **commit-msg:** check the commit log message to catch duplicate Signed-off-by lines
- **fsmonitor-watchman:** output to stdout all files that have been modified since a given time
- **post-update:** prepare a packed repository for use over dumb transports
- **pre-applypatch:** verify what is about to be committed by applypatch from an e-mail message
- **pre-commit:** verify what is about to be committed
- **pre-push:** prevent push of commits where the log message starts with "WIP" (work in progress)
- **pre-rebase:** prevent topic branches that are already merged to 'next' branch from getting rebased, because allowing it would result in rebasing already published history
- **pre-receive:** echo all push options that start with 'echoback=' and reject all pushes when the "reject" push option is used
- **prepare-commit-msg:**
    - remove the "# Please enter the commit message..." help message
    - include the output of "git diff --name-status -r" into the message, just before the "git status" output
    - add a signed-off-by line to the message, that can still be edited (this is rarely a good idea)
- **update:** block unannotated tags from entering

## Helpful Hints
You can bypass pre-commit hooks by adding `--no-verify` to the end of your `git commit` command

## Development

Want to contribute? Great!

To fix a bug or add an enhancement, follow these steps:

- Fork the repo
- Create a new branch (`git checkout -b improve-feature`)
- Make the appropriate changes in the files
- Commit your changes (`git commit -am 'Improve feature'`)
- Push to the branch (`git push origin improve-feature`)
- Create a Pull Request

## Resources
Below are a variety of helpful resources on how git hooks work.

### Documentation
[Git hooks documentation at git-scm.com](https://git-scm.com/docs/githooks)

### Video
[Git hooks and practical uses. Yes, even on Windows.](http://www.youtube.com/watch?feature=player_embedded&v=fMYv6-SZsSo&t=240s)

### Articles
[An Introduction to Git Hooks](https://www.sitepoint.com/introduction-git-hooks/)

[Git hooks and practical uses. Yes, even on Windows.](https://www.tygertec.com/git-hooks-practical-uses-windows/)

[Easy git hooks with husky](https://www.vojtechruzicka.com/githooks-husky/)

[Git Hooked](https://www.javascriptjanuary.com/blog/git-hooked "Git Hooked")

[Automate Your Workflow with Git Hooks](https://hackernoon.com/automate-your-workflow-with-git-hooks-fef5d9b2a58c)

[Using JavaScript in Your Git Hooks](https://medium.com/@Sergeon/using-javascript-in-your-git-hooks-f0ce09477334 "Using JavaScript in Your Git Hooks")

[An In-Depth Look at Git Hooks](https://dzone.com/articles/an-in-depth-look-at-git-hooks)

### Book
[Git Pro by Scott Chacon and Ben Straub](https://git-scm.com/book/en/v2)
